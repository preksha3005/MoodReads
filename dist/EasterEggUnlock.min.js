export class EasterEggUnlock{constructor(e,t){this.triggerElement=e,this.onUnlock=t,this.clickCount=0,this.clickTimer=null,this.clickTimeout=2e3,this.init()}init(){this.triggerElement?(this.triggerElement.addEventListener("click",this.handleClick.bind(this)),this.triggerElement.style.cursor="pointer",this.triggerElement.title="Something magical might happen..."):console.warn("EasterEggUnlock: No trigger element provided")}handleClick(){this.clickCount++,this.clickTimer&&clearTimeout(this.clickTimer),this.clickCount>=3?(this.unlock(),this.reset()):this.clickTimer=setTimeout(()=>{this.reset()},this.clickTimeout)}unlock(){this.isStorageUnlocked()||(this.setStorageUnlocked(!0),this.showUnlockFeedback(),this.onUnlock&&this.onUnlock())}isStorageUnlocked(){try{return"true"===sessionStorage.getItem("easterEggUnlocked")}catch(e){return console.warn("sessionStorage unavailable, easter egg state will not persist:",e),!1}}setStorageUnlocked(e){try{sessionStorage.setItem("easterEggUnlocked",e?"true":"false")}catch(e){console.warn("Failed to save easter egg state to sessionStorage:",e),console.info("Easter egg will remain unlocked for this session but will not persist on reload")}}showUnlockFeedback(){this.triggerElement.classList.add("easter-egg-unlocked"),setTimeout(()=>{this.triggerElement.classList.remove("easter-egg-unlocked")},1e3)}reset(){this.clickCount=0,this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null)}static isUnlocked(){try{return"true"===sessionStorage.getItem("easterEggUnlocked")}catch(e){return console.warn("sessionStorage unavailable:",e),!1}}static forceUnlock(){try{sessionStorage.setItem("easterEggUnlocked","true")}catch(e){console.warn("Failed to force unlock easter egg:",e)}}static reset(){try{sessionStorage.removeItem("easterEggUnlocked")}catch(e){console.warn("Failed to reset easter egg state:",e)}}}export default EasterEggUnlock;